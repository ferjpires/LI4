<MudDialog MaxWidth="MaxWidth.Medium" Style="width: 800px; border-radius: 20px">
    <DialogContent>

        <MudPaper Class="p-4 my-4" Elevation="1" Style="background-color: #FFFFFF; border-radius: 20px;">
            <MudText Typo="Typo.subtitle1" Class="mb-2" Color="Color.Primary">Ingredientes</MudText>
            <MudList T="Ingrediente">
                @foreach (var ingrediente in Ingredientes)
                {
                    <MudListItem T="Ingrediente">
                        <MudListItemIcon>
                            <img src="@ingrediente.ImagemURL" alt="@ingrediente.Nome" style="width: 40px; height: 40px; object-fit: contain;" />
                        </MudListItemIcon>
                        <MudListItemText>
                            <MudText Typo="Typo.body1">@ingrediente.Nome</MudText>
                            <MudText Typo="Typo.body2" Class="text-gray-600">Quantidade: 100g Stock: @ingrediente.QuantidadeEmStock</MudText>
                        </MudListItemText>
                        @if (ingrediente.QuantidadeEmStock <= 0)
                        {
                            <MudListItemIcon>
                                <MudIcon Icon="@Icons.Material.Filled.Warning" Color="Color.Error" />
                            </MudListItemIcon>
                        }
                    </MudListItem>
                }
            </MudList>
        </MudPaper>

        @if (Ingredientes.Any(i => i.QuantidadeEmStock <= 0))
        {
            <MudText Typo="Typo.body2" Color="Color.Error" Class="mt-4">
                <MudIcon Icon="@Icons.Material.Filled.Warning" /> Não tem ingredientes suficientes em stock
            </MudText>
        }
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="IniciarMontagem" Disabled="@(Ingredientes.Any(i => i.QuantidadeEmStock <= 0))" Color="Color.Secondary" Style="border-radius: 20px;">Iniciar Montagem</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] private IMudDialogInstance MudDialog { get; set; } = default!;
    [Parameter] public Produto Produto { get; set; } = default!;
    [Parameter] public List<Ingrediente> Ingredientes { get; set; } = new();

    private void Cancel() => MudDialog.Cancel();

    private void IniciarMontagem()
    {
        MudDialog.Close(DialogResult.Ok(true));
    }
}



